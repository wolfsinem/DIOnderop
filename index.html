<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIOonderop Aftelkalender</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        /* Stijl voor afgevinkte dagen */
        .day-checked {
            background-color: #374151 !important; /* gray-700 */
            text-decoration: line-through;
            color: #6b7280; /* gray-500 */
            transform: scale(0.95);
            opacity: 0.6;
        }
        /* Animatie voor elementen die verschijnen */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-900 text-white antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500 mb-2">De Grote DIO Ontsnapping</h1>
            <p class="text-gray-400 text-lg">Aftellen naar de vrijheid!</p>
        </header>

        <!-- Countdown Timer -->
        <div id="countdown-widget" class="bg-gray-800 rounded-xl p-6 mb-8 shadow-2xl border border-gray-700 fade-in">
            <h2 class="text-xl font-bold text-center mb-4 text-teal-400">Nog...</h2>
            <div id="countdown-timer" class="grid grid-cols-4 gap-4 text-center">
                <div>
                    <div id="days" class="text-4xl md:text-6xl font-extrabold text-white">00</div>
                    <div class="text-sm text-gray-400">Dagen</div>
                </div>
                <div>
                    <div id="hours" class="text-4xl md:text-6xl font-extrabold text-white">00</div>
                    <div class="text-sm text-gray-400">Uren</div>
                </div>
                <div>
                    <div id="minutes" class="text-4xl md:text-6xl font-extrabold text-white">00</div>
                    <div class="text-sm text-gray-400">Minuten</div>
                </div>
                <div>
                    <div id="seconds" class="text-4xl md:text-6xl font-extrabold text-white">00</div>
                    <div class="text-sm text-gray-400">Seconden</div>
                </div>
            </div>
        </div>
        
        <!-- Widgets -->
        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <!-- Toxicity Meter -->
            <div class="bg-gray-800 rounded-xl p-6 shadow-2xl border border-gray-700 fade-in" style="animation-delay: 0.1s;">
                <h2 class="text-lg font-bold mb-3 text-center">Toxiciteitsmeter</h2>
                <div class="w-full bg-gray-700 rounded-full h-4">
                    <div id="toxicity-bar" class="bg-gradient-to-r from-red-500 to-orange-500 h-4 rounded-full transition-all duration-500 ease-out"></div>
                </div>
                <p id="toxicity-text" class="text-center text-sm mt-2 text-gray-400">Niveau daalt...</p>
            </div>

            <!-- Quote of the Day -->
            <div class="bg-gray-800 rounded-xl p-6 shadow-2xl border border-gray-700 fade-in" style="animation-delay: 0.2s;">
                 <h2 class="text-lg font-bold mb-2 text-center">Quote van de Dag</h2>
                 <p id="quote" class="text-center text-gray-300 italic">"..."</p>
            </div>
        </div>

        <!-- Advent Calendar Grid -->
        <div id="calendar-grid" class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-7 gap-2 md:gap-4 fade-in" style="animation-delay: 0.3s;">
            <!-- Dagen worden hier door JavaScript ingevoegd -->
        </div>

    </div>

    <script>
        // --- CONFIGURATIE ---
        // Pas hier de einddatum aan. Formaat: JAAR-MAAND-DAGTUREN:MINUTEN:SECONDEN
        const endDate = new Date('2024-09-30T17:00:00');

        // Lijst met quotes. Voeg gerust meer toe!
        const quotes = [
            "De beste wraak is massaal succes.",
            "Je baan opzeggen is niet opgeven, het is kiezen voor jezelf.",
            "Adieu, DIO! Hallo, vrijheid!",
            "Sommige deuren sluiten is de beste therapie.",
            "Focus op waar je naartoe gaat, niet op wat je achterlaat.",
            "De eerste stap naar ergens komen, is besluiten dat je niet blijft waar je bent.",
            "Op naar een plek waar je energie krijgt, in plaats van dat het je energie kost.",
            "Elke dag is een stap dichter bij de kurk die knalt.",
            "Laat het verleden los, het is geen bestemming.",
            "Je vleugels bestaan al. Het enige wat je hoeft te doen is vliegen.",
            "Soms moet je een punt zetten om een nieuw hoofdstuk te kunnen beginnen.",
            "Toxiciteit is besmettelijk. Blij dat je de kuur hebt gevonden: vrijheid."
        ];

        // --- APPLICATIE LOGICA ---
        document.addEventListener('DOMContentLoaded', () => {
            const countdownTimerEl = document.getElementById('countdown-timer');
            const calendarGridEl = document.getElementById('calendar-grid');
            const quoteEl = document.getElementById('quote');
            const toxicityBarEl = document.getElementById('toxicity-bar');
            const toxicityTextEl = document.getElementById('toxicity-text');
            
            let checkedDays = JSON.parse(localStorage.getItem('checkedDays')) || [];
            let totalDays = 0;

            // Genereer de kalender
            function generateCalendar() {
                const today = new Date();
                today.setHours(0, 0, 0, 0); // Begin van de dag
                let currentDate = new Date(today);
                
                // Zorg ervoor dat de kalender niet leeg is als we na de einddatum kijken
                if (today > endDate) {
                    currentDate = new Date(endDate);
                    currentDate.setDate(currentDate.getDate() - 30); // Toon laatste 30 dagen als voorbeeld
                }

                while (currentDate <= endDate) {
                    totalDays++;
                    const dayEl = document.createElement('div');
                    const dateString = currentDate.toISOString().split('T')[0];
                    dayEl.dataset.date = dateString;
                    dayEl.className = 'day-item cursor-pointer flex flex-col items-center justify-center aspect-square bg-gray-800 rounded-lg p-2 transition-all duration-200 hover:bg-teal-600 hover:scale-105 border border-gray-700';

                    const month = currentDate.toLocaleString('nl-NL', { month: 'short' }).replace('.', '');
                    const dayOfMonth = currentDate.getDate();

                    dayEl.innerHTML = `
                        <span class="font-bold text-xl">${dayOfMonth}</span>
                        <span class="text-xs uppercase text-gray-400">${month}</span>
                    `;

                    if (checkedDays.includes(dateString)) {
                        dayEl.classList.add('day-checked');
                    }

                    dayEl.addEventListener('click', () => toggleDay(dateString, dayEl));
                    calendarGridEl.appendChild(dayEl);

                    currentDate.setDate(currentDate.getDate() + 1);
                }
                updateToxicityMeter();
            }

            // Vink een dag af of aan
            function toggleDay(dateString, element) {
                const index = checkedDays.indexOf(dateString);
                if (index > -1) {
                    checkedDays.splice(index, 1); // Uncheck
                    element.classList.remove('day-checked');
                } else {
                    checkedDays.push(dateString); // Check
                    element.classList.add('day-checked');
                }
                localStorage.setItem('checkedDays', JSON.stringify(checkedDays));
                updateToxicityMeter();
            }
            
            // Update de toxiciteitsmeter
            function updateToxicityMeter() {
                const checkedCount = checkedDays.length;
                const progress = totalDays > 0 ? (checkedCount / totalDays) : 0;
                const toxicityLevel = 100 - (progress * 100);

                toxicityBarEl.style.width = `${toxicityLevel}%`;

                if(toxicityLevel <= 0) {
                     toxicityTextEl.textContent = "Ontsnapping voltooid! Geniet van de vrijheid!";
                     toxicityBarEl.classList.remove('from-red-500', 'to-orange-500');
                     toxicityBarEl.classList.add('from-green-400', 'to-blue-500');
                } else {
                     toxicityTextEl.textContent = `Niveau: ${toxicityLevel.toFixed(0)}%`;
                }
            }

            // Update de countdown timer
            function updateCountdown() {
                const now = new Date().getTime();
                const distance = endDate - now;

                if (distance < 0) {
                    clearInterval(intervalId);
                    document.getElementById('countdown-widget').innerHTML = `<div class="text-center text-2xl font-bold p-4 text-green-400">Gefeliciteerd, de ontsnapping is een feit!</div>`;
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = String(days).padStart(2, '0');
                document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
            }
            
            // Toon een quote
            function displayQuote() {
                const today = new Date().getDate();
                const quoteIndex = today % quotes.length;
                quoteEl.textContent = `"${quotes[quoteIndex]}"`;
            }

            // Start alles
            generateCalendar();
            displayQuote();
            updateCountdown();
            const intervalId = setInterval(updateCountdown, 1000);
        });
    </script>
</body>
</html>
